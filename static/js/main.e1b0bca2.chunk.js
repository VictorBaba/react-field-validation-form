(this["webpackJsonpreact-field-validation-form-example"]=this["webpackJsonpreact-field-validation-form-example"]||[]).push([[0],{100:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(65),i=t.n(l),o=t(39),u=t(25),c=t(106),m=t(9),d=t(31),f=t(6),s=t(61);var h=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{height:"2"}),r.a.createElement(m.a,{display:"flex",justifyContent:"space-around"},r.a.createElement(s.a,{variant:"link",as:d.b,to:"/"},"Basic"),r.a.createElement(s.a,{variant:"link",as:d.b,to:"/nested"},"Nested"),r.a.createElement(s.a,{variant:"link",as:d.b,to:"/array"},"Array"),r.a.createElement(s.a,{variant:"link",as:d.b,to:"/async"},"Async")),r.a.createElement(m.a,{height:"2"}))},v=t(20),E=t(17),b=t(72),y=t.n(b),p=t(57),g=t(11),O=t.n(g);function j(){return(j=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function S(e,a){try{var t=e()}catch(n){return a(n)}return t&&t.then?t.then(void 0,a):t}var F={initialValues:O.a.objectOf(O.a.oneOfType([O.a.string,O.a.number,O.a.objectOf(O.a.string),O.a.arrayOf(O.a.exact({id:O.a.string,name:O.a.string}))])),validationSchema:O.a.objectOf(O.a.oneOfType([O.a.object,O.a.objectOf(O.a.object)])),callBack:O.a.func.isRequired};var k=function e(a){var t=function(e){var a=e.e,t=e.id;try{var n=a.target,r=n.name,l=n.value,i=Object(p.a)().shape(q[r]),o=S((function(){var e;return Promise.resolve(i.validate((e={},e[r]=l,e))).then((function(){s((function(e){var a,n,l,i;return j(j({},e),e[r]?((n={})[r]=j(j({},e[r]),{},((a={})[t]=null,a)),n):((i={})[r]=((l={})[t]=null,l),i))}))}))}),(function(e){s((function(a){var n,l,i,o;return j(j({},a),a[r]?((l={})[r]=j(j({},a[r]),{},((n={})[t]=e.message,n)),l):((o={})[r]=((i={})[t]=e.message,i),o))}))}));return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(a){return Promise.reject(a)}},r=function(e){try{var a=e.target,t=a.value,n=a.name,r=n.includes("."),l=function(){if(r){var e=n.split("."),a=e[0],l=e[1],i=Object(p.a)().shape(q[l]),o=S((function(){var e;return Promise.resolve(i.validate((e={},e[l]=t,e))).then((function(){s((function(e){var t,n;return j(j({},e),{},((n={})[a]=j(j({},e[a]),{},((t={})[l]=null,t)),n))}))}))}),(function(e){s((function(t){var n,r;return j(j({},t),{},((r={})[a]=j(j({},t[a]),{},((n={})[l]=e.message,n)),r))}))}));if(o&&o.then)return o.then((function(){}))}else{var u=Object(p.a)().shape(q[n]),c=S((function(){var e;return Promise.resolve(u.validate((e={},e[n]=t,e))).then((function(){s((function(e){var a;return j(j({},e),{},((a={})[n]=null,a))}))}))}),(function(e){s((function(a){var t;return j(j({},a),{},((t={})[n]=e.message,t))}))}));if(c&&c.then)return c.then((function(){}))}}();return Promise.resolve(l&&l.then?l.then((function(){})):void 0)}catch(e){return Promise.reject(e)}},l=a.initialValues,i=a.validationSchema,o=a.callBack,u=Object(n.useState)(l),c=u[0],m=u[1],d=Object(n.useState)({}),f=d[0],s=d[1],h=Object(n.useState)(!1),v=h[0],E=h[1],b=Object(n.useState)(!1),g=b[0],k=b[1];function A(e){return Object.entries(e).map((function(e){var a=e[0],t=e[1],n="object"===typeof t&&!Array.isArray(t),r=Array.isArray(t);return t&&n?Object.keys(t):r?t.map((function(e){return e.id})):a})).flat()}function C(e,a){return"number"===e?parseInt(a):a}Object(n.useEffect)((function(){O.a.checkPropTypes(F,{callBack:o,initialValues:l,validationSchema:i},"useFieldValidationForm",e)}),[l,o,i]),Object(n.useEffect)((function(){y()(c,l)||v||m(l)}),[l,c,v]),Object(n.useEffect)((function(){var e=Object.values(f).map((function(e){return"object"===typeof e&&null!==e?Object.values(e):e})).flat().filter((function(e){return null!==e})).length>0||0===Object.keys(f).length,a=A(c),t=A(f),n=a.every((function(e){return-1!==t.indexOf(e)}));e&&n&&k(!1),g&&v&&!e&&n&&(o(c),m(l),E(!1),k(!1),s({}))}),[o,f,l,c,v,g,i]);var V={},P=Object.entries(i).reduce((function(e,a){var t,n,r=a[0],l=a[1];return Object.keys(l).includes("_deps")?j(((n={})[r]=((t={})[r]=l,t),n),e):(V=Object.entries(l).reduce((function(e,a){var t,n,r=a[0],l=a[1];return j(((n={})[r]=((t={})[r]=l,t),n),e)}),{}),e)}),{}),q=j(j({},P),V);return{formData:c,handleChange:function(e){var a=e.target,t=a.name,n=a.value,r=a.type;if(t.includes(".")){var l=t.split("."),i=l[0],o=l[1];m((function(e){var a,t;return j(j({},e),{},((t={})[i]=j(j({},c[i]),{},((a={})[o]=C(r,n),a)),t))}))}else m((function(e){var a;return j(j({},e),{},((a={})[t]=C(r,n),a))}));E(!0),k(!1)},handleSubmit:function(e){e.preventDefault(),function(e){var a=A(f);Object.entries(e).forEach((function(e){var n=e[0],l=e[1],i="object"===typeof c[n]&&!Array.isArray(c[n]),o=Array.isArray(c[n]);o&&c[n].length&&c[n].map((function(e){var r=e.id,l=e.name;a.includes(r)||t({e:{target:{name:n,value:l}},id:r})})),i&&Object.keys(l).forEach((function(e){a.includes(e)||r({target:{name:n+"."+e,value:c[n][e]}})})),o||i||a.includes(n)||r({target:{name:n,value:c[n]}})}))}(i),k(!0)},handleValidateField:r,handleArrayOnChange:function(e){var a=e.e,t=e.id,n=a.target,r=n.name,l=n.value,i=c[r].map((function(e){return e.id===t?j(j({},e),{},{name:l}):e}));m((function(e){var a;return j(j({},e),{},((a={})[r]=i,a))})),E(!0),k(!1)},handleArrayPushField:function(e){var a=e.key,t=e.data;m((function(e){var n;return j(j({},e),{},((n={})[a]=[].concat(c[a],[t]),n))})),E(!0),k(!1)},handleArrayRemoveField:function(e){var a=e.key,t=e.id;m((function(e){var n;return j(j({},e),{},((n={})[a]=e[a].filter((function(e){return e.id!==t})),n))})),s((function(e){var n;return(null===e||void 0===e||null===(n=e[a])||void 0===n?void 0:n[t])&&delete e[a][t],e})),E(!0),k(!1)},handleValidateArrayField:t,errors:f}},A=t(102),C=t(105);var V=function(){var e=Object(n.useState)(null),a=Object(v.a)(e,2),t=a[0],l=a[1],i=k({initialValues:{email:"",password:""},validationSchema:{email:Object(E.a)().required("Field Required!").email("Format invalid!"),password:Object(E.a)().required("Field Required!").min(3,"Minimum of 3 characters")},callBack:function(e){l(e)}}),o=i.formData,u=i.errors,c=i.handleChange,d=i.handleSubmit,f=i.handleValidateField;return r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement("form",{method:"POST",onSubmit:d},r.a.createElement(A.a,{htmlFor:"email"},"Email"),r.a.createElement(C.a,{type:"text",name:"email",id:"email",value:o.email,onChange:c,onInput:f}),r.a.createElement("div",null,null===u||void 0===u?void 0:u.email),r.a.createElement(m.a,{height:"8"}),r.a.createElement(A.a,{htmlFor:"password"},"Password"),r.a.createElement(C.a,{type:"password",name:"password",id:"password",value:o.password,onChange:c,onInput:f}),r.a.createElement("div",null,null===u||void 0===u?void 0:u.password),r.a.createElement(m.a,{height:"8"}),r.a.createElement(s.a,{variant:"solid",type:"submit"},"submit"," ")),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Output Values: ",t&&JSON.stringify(t,null,2)))};var P=function(){var e,a,t=Object(n.useState)(null),l=Object(v.a)(t,2),i=l[0],o=l[1],u=k({initialValues:{user:{name:"",email:""}},validationSchema:{user:{name:Object(E.a)().required("Field Required!").min(3,"Minimum of 3 characters"),email:Object(E.a)().required("Field Required!").email("Format invalid!")}},callBack:function(e){o(e)}}),c=u.formData,d=u.errors,f=u.handleChange,h=u.handleSubmit,b=u.handleValidateField;return r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement("form",{method:"POST",onSubmit:h},r.a.createElement(A.a,{htmlFor:"name"},"Name"),r.a.createElement(C.a,{type:"name",name:"user.name",id:"name",value:c.user.name,onChange:f,onInput:b}),r.a.createElement("div",null,null===d||void 0===d||null===(e=d.user)||void 0===e?void 0:e.name),r.a.createElement(m.a,{height:"8"}),r.a.createElement(A.a,{htmlFor:"email"},"Email"),r.a.createElement(C.a,{type:"text",name:"user.email",id:"email",value:c.user.email,onChange:f,onInput:b}),r.a.createElement("div",null,null===d||void 0===d||null===(a=d.user)||void 0===a?void 0:a.email),r.a.createElement(m.a,{height:"8"}),r.a.createElement(s.a,{variant:"solid",type:"submit"},"submit"," ")),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Output Values: ",i&&JSON.stringify(i,null,2)))},q=t(40),x=t(56),w=t(103),R=t(104),I=t(55);var N=function(){var e=Object(n.useState)(null),a=Object(v.a)(e,2),t=a[0],l=a[1],i=k({initialValues:{name:"",food:[{id:"1",name:""}]},validationSchema:{name:Object(E.a)().required("Field Required!").min(3,"Minimum of 3 characters"),food:Object(E.a)().required("Field Required!").min(2,"Minimum of 2 characters")},callBack:function(e){var a=e.food.reduce((function(e,a){a.id;var t=a.name;return[].concat(Object(x.a)(e),[t])}),[]);l(Object(q.a)(Object(q.a)({},e),{},{food:a}))}}),o=i.formData,u=i.errors,c=i.handleChange,d=i.handleSubmit,f=i.handleValidateField,h=i.handleArrayOnChange,b=i.handleValidateArrayField,y=i.handleArrayRemoveField,p=i.handleArrayPushField;return r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement("form",{method:"POST",onSubmit:d},r.a.createElement(A.a,{htmlFor:"name"},"Name"),r.a.createElement(C.a,{type:"name",name:"name",id:"name",value:o.name,onChange:c,onInput:f}),r.a.createElement("div",null,null===u||void 0===u?void 0:u.name),r.a.createElement(m.a,{height:"8"}),o.food.map((function(e,a){var t;return r.a.createElement(m.a,{key:a},r.a.createElement(w.a,{direction:"column"},r.a.createElement(A.a,{htmlFor:"food"},"Preferred food No: ",a+1),r.a.createElement(w.a,null,r.a.createElement(C.a,{type:"text",name:"food",id:e.id,value:e.name,onChange:function(t){return h({e:t,id:e.id,index:a})},onInput:function(a){return b({e:a,id:e.id})}}),o.food.length>1&&r.a.createElement(R.a,{"aria-label":"Remove Food",icon:"close",onClick:function(){return y({key:"food",id:e.id})},marginLeft:"2"})),r.a.createElement(m.a,null,null===u||void 0===u||null===(t=u.food)||void 0===t?void 0:t[e.id])),r.a.createElement(m.a,{height:"8"}))})),r.a.createElement(s.a,{onClick:function(){return p({key:"food",data:{id:Object(I.generate)(),name:""}})}},"Add new type of Food"),r.a.createElement(m.a,{height:"8"}),r.a.createElement(s.a,{variant:"solid",type:"submit"},"submit"," ")),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Output Values: ",t&&JSON.stringify(t,null,2)))};var B=function(){var e,a=Object(n.useState)(null),t=Object(v.a)(a,2),l=t[0],i=t[1],o=Object(n.useState)(!1),u=Object(v.a)(o,2),c=u[0],d=u[1],f=Object(n.useState)(null),h=Object(v.a)(f,2),b=h[0],y=h[1],p=k({initialValues:{name:null!==(e=null===l||void 0===l?void 0:l.name)&&void 0!==e?e:"",food:(null===l||void 0===l?void 0:l.food.length)?l.food.map((function(e,a){return{id:"".concat(a+1),name:e}})):[{id:"1",name:""}]},validationSchema:{name:Object(E.a)().required("Field Required!").min(3,"Minimum of 3 characters"),food:Object(E.a)().required("Field Required!").min(2,"Minimum of 2 characters")},callBack:function(e){var a=e.food.reduce((function(e,a){a.id;var t=a.name;return[].concat(Object(x.a)(e),[t])}),[]);y(Object(q.a)(Object(q.a)({},e),{},{food:a}))}}),g=p.formData,O=p.errors,j=p.handleChange,S=p.handleSubmit,F=p.handleValidateField,V=p.handleArrayOnChange,P=p.handleValidateArrayField,N=p.handleArrayRemoveField,B=p.handleArrayPushField;return Object(n.useEffect)((function(){l||(d(!0),setTimeout((function(){i({name:"Example Name",food:["fries","fish","eggs","tofu"]}),d(!1)}),3e3))}),[l]),r.a.createElement(m.a,null,c?r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Data is Loading ...... ")):r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement("form",{method:"POST",onSubmit:S},r.a.createElement(A.a,{htmlFor:"name"},"Name"),r.a.createElement(C.a,{type:"name",name:"name",id:"name",value:g.name,onChange:j,onInput:F}),r.a.createElement("div",null,null===O||void 0===O?void 0:O.name),r.a.createElement(m.a,{height:"8"}),g.food.map((function(e,a){var t;return r.a.createElement(m.a,{key:a},r.a.createElement(w.a,{direction:"column"},r.a.createElement(A.a,{htmlFor:"food"},"Preferred food No: ",a+1),r.a.createElement(w.a,null,r.a.createElement(C.a,{type:"text",name:"food",id:e.id,value:e.name,onChange:function(t){return V({e:t,id:e.id,index:a})},onInput:function(a){return P({e:a,id:e.id})}}),g.food.length>1&&r.a.createElement(R.a,{"aria-label":"Remove Food",icon:"close",onClick:function(){return N({key:"food",id:e.id})},marginLeft:"2"})),r.a.createElement(m.a,null,null===O||void 0===O||null===(t=O.food)||void 0===t?void 0:t[e.id])),r.a.createElement(m.a,{height:"8"}))})),r.a.createElement(s.a,{onClick:function(){return B({key:"food",data:{id:Object(I.generate)(),name:""}})}},"Add new type of Food"),r.a.createElement(m.a,{height:"8"}),r.a.createElement(s.a,{variant:"solid",type:"submit"},"submit"," ")),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Output Values to be sent back to server:"," ",b&&JSON.stringify(b,null,2))))};var T=function(){return r.a.createElement(m.a,{maxWidth:"xl",margin:"auto"},r.a.createElement(d.a,null,r.a.createElement(h,null),r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/"},r.a.createElement(V,null)),r.a.createElement(f.a,{path:"/nested"},r.a.createElement(P,null)),r.a.createElement(f.a,{path:"/array"},r.a.createElement(N,null)),r.a.createElement(f.a,{path:"/async"},r.a.createElement(B,null)))))};i.a.render(r.a.createElement(o.a,null,r.a.createElement(u.a,null,r.a.createElement(c.a,null),r.a.createElement(T,null))),document.getElementById("root"))},76:function(e,a,t){e.exports=t(100)}},[[76,1,2]]]);
//# sourceMappingURL=main.e1b0bca2.chunk.js.map