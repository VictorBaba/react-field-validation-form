(this["webpackJsonpreact-field-validation-form-example"]=this["webpackJsonpreact-field-validation-form-example"]||[]).push([[0],{103:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(67),i=t.n(l),c=t(40),u=t(26),o=t(109),m=t(11),d=t(32),s=t(7),f=t(63);var h=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{height:"2"}),r.a.createElement(m.a,{display:"flex",justifyContent:"space-around"},r.a.createElement(f.a,{variant:"link",as:d.b,to:"/"},"Basic"),r.a.createElement(f.a,{variant:"link",as:d.b,to:"/nested"},"Nested"),r.a.createElement(f.a,{variant:"link",as:d.b,to:"/array"},"Array"),r.a.createElement(f.a,{variant:"link",as:d.b,to:"/async"},"Async")),r.a.createElement(m.a,{height:"2"}))},b=t(8),v=t(19),O=t(44),j=t.n(O),E=t(41),p=t(62),g=t(3),y=t(74),F=t.n(y),k=t(58),S=t(13),x=t.n(S),A={initialValues:x.a.objectOf(x.a.oneOfType([x.a.string,x.a.number,x.a.objectOf(x.a.string),x.a.arrayOf(x.a.exact({id:x.a.string,name:x.a.string}))])),validationSchema:x.a.objectOf(x.a.oneOfType([x.a.object,x.a.objectOf(x.a.object)])),callBack:x.a.func.isRequired};var C=function e(a){var t=a.initialValues,r=a.validationSchema,l=a.callBack,i=Object(n.useState)(t),c=Object(b.a)(i,2),u=c[0],o=c[1],m=Object(n.useState)({}),d=Object(b.a)(m,2),s=d[0],f=d[1],h=Object(n.useState)(!1),v=Object(b.a)(h,2),O=v[0],y=v[1],S=Object(n.useState)(!1),C=Object(b.a)(S,2),V=C[0],q=C[1];function w(e){return Object.entries(e).map((function(e){var a=Object(b.a)(e,2),t=a[0],n=a[1],r="object"===typeof n&&!Array.isArray(n),l=Array.isArray(n);return n&&r?Object.keys(n):l?n.map((function(e){return e.id})):t})).flat()}function B(e,a){return"number"===e?parseInt(a):a}Object(n.useEffect)((function(){x.a.checkPropTypes(A,{callBack:l,initialValues:t,validationSchema:r},"useFieldValidationForm",e)}),[t,l,r]),Object(n.useEffect)((function(){F()(u,t)||O||o(t)}),[t,u,O]),Object(n.useEffect)((function(){var e=Object.values(s).map((function(e){return"object"===typeof e&&null!==e?Object.values(e):e})).flat().filter((function(e){return null!==e})).length>0||0===Object.keys(s).length,a=w(u),n=w(s),r=a.every((function(e){return-1!==n.indexOf(e)}));e&&r&&q(!1),V&&O&&!e&&r&&(l(u),o(t),y(!1),q(!1),f({}))}),[l,s,t,u,O,V,r]);var R={},N=Object.entries(r).reduce((function(e,a){var t=Object(b.a)(a,2),n=t[0],r=t[1];return Object.keys(r).includes("_deps")?Object(g.a)({[n]:{[n]:r}},e):(R=Object.entries(r).reduce((function(e,a){var t=Object(b.a)(a,2),n=t[0],r=t[1];return Object(g.a)({[n]:{[n]:r}},e)}),{}),e)}),{}),P=Object(g.a)(Object(g.a)({},N),R);function T(e){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(j.a.mark((function e(a){var t,n,r,l,i,c,u,o,m;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.target,n=t.value,r=t.name,!r.includes(".")){e.next=17;break}return l=r.split("."),i=Object(b.a)(l,2),c=i[0],u=i[1],y(!0),o=Object(k.a)().shape(P[u]),e.prev=6,e.next=9,o.validate({[u]:n});case 9:f((function(e){return Object(g.a)(Object(g.a)({},e),{},{[c]:Object(g.a)(Object(g.a)({},e[c]),{},{[u]:null})})})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),f((function(a){return Object(g.a)(Object(g.a)({},a),{},{[c]:Object(g.a)(Object(g.a)({},a[c]),{},{[u]:e.t0.message})})}));case 15:e.next=28;break;case 17:return y(!0),m=Object(k.a)().shape(P[r]),e.prev=19,e.next=22,m.validate({[r]:n});case 22:f((function(e){return Object(g.a)(Object(g.a)({},e),{},{[r]:null})})),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(19),f((function(a){return Object(g.a)(Object(g.a)({},a),{},{[r]:e.t1.message})}));case 28:case"end":return e.stop()}}),e,null,[[6,12],[19,25]])})))).apply(this,arguments)}function J(e){return M.apply(this,arguments)}function M(){return(M=Object(p.a)(j.a.mark((function e(a){var t,n,r,l,i,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.e,n=a.id,r=t.target,l=r.name,i=r.value,c=Object(k.a)().shape(P[l]),e.prev=3,e.next=6,c.validate({[l]:i});case 6:f((function(e){return Object(g.a)(Object(g.a)({},e),e[l]?{[l]:Object(g.a)(Object(g.a)({},e[l]),{},{[n]:null})}:{[l]:{[n]:null}})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),f((function(a){return Object(g.a)(Object(g.a)({},a),a[l]?{[l]:Object(g.a)(Object(g.a)({},a[l]),{},{[n]:e.t0.message})}:{[l]:{[n]:e.t0.message}})}));case 12:y(!0);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}return{formData:u,handleChange:function(e){var a=e.target,t=a.name,n=a.value,r=a.type;if(t.includes(".")){var l=t.split("."),i=Object(b.a)(l,2),c=i[0],m=i[1];o((function(e){return Object(g.a)(Object(g.a)({},e),{},{[c]:Object(g.a)(Object(g.a)({},u[c]),{},{[m]:B(r,n)})})})),y(!0)}else o((function(e){return Object(g.a)(Object(g.a)({},e),{},{[t]:B(r,n)})})),y(!0)},handleSubmit:function(e){e.preventDefault(),function(e){var a=w(s);Object.entries(e).forEach((function(e){var t=Object(b.a)(e,2),n=t[0],r=t[1],l="object"===typeof u[n]&&!Array.isArray(u[n]),i=Array.isArray(u[n]);i&&u[n].length&&u[n].map((function(e){var t=e.id,r=e.name;a.includes(t)||J({e:{target:{name:n,value:r}},id:t})})),l&&Object.keys(r).forEach((function(e){a.includes(e)||T({target:{name:"".concat(n,".").concat(e),value:u[n][e]}})})),i||l||a.includes(n)||T({target:{name:n,value:u[n]}})}))}(r),q(!0)},handleValidateField:T,handleArrayOnChange:function(e){var a=e.e,t=e.id,n=a.target,r=n.name,l=n.value,i=u[r].map((function(e){return e.id===t?Object(g.a)(Object(g.a)({},e),{},{name:l}):e}));o((function(e){return Object(g.a)(Object(g.a)({},e),{},{[r]:i})})),y(!0)},handleArrayPushField:function(e){var a=e.key,t=e.data;o((function(e){return Object(g.a)(Object(g.a)({},e),{},{[a]:[].concat(Object(E.a)(u[a]),[t])})})),y(!0)},handleArrayRemoveField:function(e){var a=e.key,t=e.id;o((function(e){return Object(g.a)(Object(g.a)({},e),{},{[a]:e[a].filter((function(e){return e.id!==t}))})})),f((function(e){var n;return(null===e||void 0===e||null===(n=e[a])||void 0===n?void 0:n[t])&&delete e[a][t],e})),y(!0)},handleValidateArrayField:J,errors:s}},V=t(105),q=t(108);var w=function(){var e=Object(n.useState)(null),a=Object(b.a)(e,2),t=a[0],l=a[1],i=C({initialValues:{email:"",password:""},validationSchema:{email:Object(v.a)().required("Field Required!").email("Format invalid!"),password:Object(v.a)().required("Field Required!").min(3,"Minimum of 3 characters")},callBack:function(e){l(e)}}),c=i.formData,u=i.errors,o=i.handleChange,d=i.handleSubmit,s=i.handleValidateField;return r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement("form",{method:"POST",onSubmit:d},r.a.createElement(V.a,{htmlFor:"email"},"Email"),r.a.createElement(q.a,{type:"text",name:"email",id:"email",value:c.email,onChange:o,onBlur:s}),r.a.createElement("div",null,null===u||void 0===u?void 0:u.email),r.a.createElement(m.a,{height:"8"}),r.a.createElement(V.a,{htmlFor:"password"},"Password"),r.a.createElement(q.a,{type:"password",name:"password",id:"password",value:c.password,onChange:o,onBlur:s}),r.a.createElement("div",null,null===u||void 0===u?void 0:u.password),r.a.createElement(m.a,{height:"8"}),r.a.createElement(f.a,{variant:"solid",type:"submit"},"submit"," ")),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Output Values: ",t&&JSON.stringify(t,null,2)))};var B=function(){var e,a,t=Object(n.useState)(null),l=Object(b.a)(t,2),i=l[0],c=l[1],u=C({initialValues:{user:{name:"",email:""}},validationSchema:{user:{name:Object(v.a)().required("Field Required!").min(3,"Minimum of 3 characters"),email:Object(v.a)().required("Field Required!").email("Format invalid!")}},callBack:function(e){c(e)}}),o=u.formData,d=u.errors,s=u.handleChange,h=u.handleSubmit,O=u.handleValidateField;return r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement("form",{method:"POST",onSubmit:h},r.a.createElement(V.a,{htmlFor:"name"},"Name"),r.a.createElement(q.a,{type:"name",name:"user.name",id:"name",value:o.user.name,onChange:s,onBlur:O}),r.a.createElement("div",null,null===d||void 0===d||null===(e=d.user)||void 0===e?void 0:e.name),r.a.createElement(m.a,{height:"8"}),r.a.createElement(V.a,{htmlFor:"email"},"Email"),r.a.createElement(q.a,{type:"text",name:"user.email",id:"email",value:o.user.email,onChange:s,onBlur:O}),r.a.createElement("div",null,null===d||void 0===d||null===(a=d.user)||void 0===a?void 0:a.email),r.a.createElement(m.a,{height:"8"}),r.a.createElement(f.a,{variant:"solid",type:"submit"},"submit"," ")),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Output Values: ",i&&JSON.stringify(i,null,2)))},R=t(106),N=t(107),P=t(57);var T=function(){var e=Object(n.useState)(null),a=Object(b.a)(e,2),t=a[0],l=a[1],i=C({initialValues:{name:"",food:[{id:"1",name:""}]},validationSchema:{name:Object(v.a)().required("Field Required!").min(3,"Minimum of 3 characters"),food:Object(v.a)().required("Field Required!").min(2,"Minimum of 2 characters")},callBack:function(e){var a=e.food.reduce((function(e,a){a.id;var t=a.name;return[].concat(Object(E.a)(e),[t])}),[]);l(Object(g.a)(Object(g.a)({},e),{},{food:a}))}}),c=i.formData,u=i.errors,o=i.handleChange,d=i.handleSubmit,s=i.handleValidateField,h=i.handleArrayOnChange,O=i.handleValidateArrayField,j=i.handleArrayRemoveField,p=i.handleArrayPushField;return r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement("form",{method:"POST",onSubmit:d},r.a.createElement(V.a,{htmlFor:"name"},"Name"),r.a.createElement(q.a,{type:"name",name:"name",id:"name",value:c.name,onChange:o,onBlur:s}),r.a.createElement("div",null,null===u||void 0===u?void 0:u.name),r.a.createElement(m.a,{height:"8"}),c.food.map((function(e,a){var t;return r.a.createElement(m.a,{key:a},r.a.createElement(R.a,{direction:"column"},r.a.createElement(V.a,{htmlFor:"food"},"Preferred food No: ",a+1),r.a.createElement(R.a,null,r.a.createElement(q.a,{type:"text",name:"food",id:e.id,value:e.name,onChange:function(t){return h({e:t,id:e.id,index:a})},onBlur:function(a){return O({e:a,id:e.id})}}),c.food.length>1&&r.a.createElement(N.a,{"aria-label":"Remove Food",icon:"close",onClick:function(){return j({key:"food",id:e.id})},marginLeft:"2"})),r.a.createElement(m.a,null,null===u||void 0===u||null===(t=u.food)||void 0===t?void 0:t[e.id])),r.a.createElement(m.a,{height:"8"}))})),r.a.createElement(f.a,{onClick:function(){return p({key:"food",data:{id:Object(P.generate)(),name:""}})}},"Add new type of Food"),r.a.createElement(m.a,{height:"8"}),r.a.createElement(f.a,{variant:"solid",type:"submit"},"submit"," ")),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Output Values: ",t&&JSON.stringify(t,null,2)))};var D=function(){var e,a=Object(n.useState)(null),t=Object(b.a)(a,2),l=t[0],i=t[1],c=Object(n.useState)(!1),u=Object(b.a)(c,2),o=u[0],d=u[1],s=Object(n.useState)(null),h=Object(b.a)(s,2),O=h[0],j=h[1],p=C({initialValues:{name:null!==(e=null===l||void 0===l?void 0:l.name)&&void 0!==e?e:"",food:(null===l||void 0===l?void 0:l.food.length)?l.food.map((function(e,a){return{id:"".concat(a+1),name:e}})):[{id:"1",name:""}]},validationSchema:{name:Object(v.a)().required("Field Required!").min(3,"Minimum of 3 characters"),food:Object(v.a)().required("Field Required!").min(2,"Minimum of 2 characters")},callBack:function(e){var a=e.food.reduce((function(e,a){a.id;var t=a.name;return[].concat(Object(E.a)(e),[t])}),[]);j(Object(g.a)(Object(g.a)({},e),{},{food:a}))}}),y=p.formData,F=p.errors,k=p.handleChange,S=p.handleSubmit,x=p.handleValidateField,A=p.handleArrayOnChange,w=p.handleValidateArrayField,B=p.handleArrayRemoveField,T=p.handleArrayPushField;return Object(n.useEffect)((function(){l||(d(!0),setTimeout((function(){i({name:"Example Name",food:["fries","fish","eggs","tofu"]}),d(!1)}),3e3))}),[l]),r.a.createElement(m.a,null,o?r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Data is Loading ...... ")):r.a.createElement(m.a,null,r.a.createElement(m.a,{height:"8"}),r.a.createElement("form",{method:"POST",onSubmit:S},r.a.createElement(V.a,{htmlFor:"name"},"Name"),r.a.createElement(q.a,{type:"name",name:"name",id:"name",value:y.name,onChange:k,onBlur:x}),r.a.createElement("div",null,null===F||void 0===F?void 0:F.name),r.a.createElement(m.a,{height:"8"}),y.food.map((function(e,a){var t;return r.a.createElement(m.a,{key:a},r.a.createElement(R.a,{direction:"column"},r.a.createElement(V.a,{htmlFor:"food"},"Preferred food No: ",a+1),r.a.createElement(R.a,null,r.a.createElement(q.a,{type:"text",name:"food",id:e.id,value:e.name,onChange:function(t){return A({e:t,id:e.id,index:a})},onBlur:function(a){return w({e:a,id:e.id})}}),y.food.length>1&&r.a.createElement(N.a,{"aria-label":"Remove Food",icon:"close",onClick:function(){return B({key:"food",id:e.id})},marginLeft:"2"})),r.a.createElement(m.a,null,null===F||void 0===F||null===(t=F.food)||void 0===t?void 0:t[e.id])),r.a.createElement(m.a,{height:"8"}))})),r.a.createElement(f.a,{onClick:function(){return T({key:"food",data:{id:Object(P.generate)(),name:""}})}},"Add new type of Food"),r.a.createElement(m.a,{height:"8"}),r.a.createElement(f.a,{variant:"solid",type:"submit"},"submit"," ")),r.a.createElement(m.a,{height:"8"}),r.a.createElement(m.a,null,"Output Values to be sent back to server:"," ",O&&JSON.stringify(O,null,2))))};var J=function(){return r.a.createElement(m.a,{maxWidth:"xl",margin:"auto"},r.a.createElement(d.a,null,r.a.createElement(h,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/"},r.a.createElement(w,null)),r.a.createElement(s.a,{path:"/nested"},r.a.createElement(B,null)),r.a.createElement(s.a,{path:"/array"},r.a.createElement(T,null)),r.a.createElement(s.a,{path:"/async"},r.a.createElement(D,null)))))};i.a.render(r.a.createElement(c.a,null,r.a.createElement(u.a,null,r.a.createElement(o.a,null),r.a.createElement(J,null))),document.getElementById("root"))},78:function(e,a,t){e.exports=t(103)}},[[78,1,2]]]);
//# sourceMappingURL=main.eb211a9d.chunk.js.map